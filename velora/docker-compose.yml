 version: "3.9"
 services:
   db:
     image: postgres:16
     environment:
       POSTGRES_USER: velora
       POSTGRES_PASSWORD: velora
       POSTGRES_DB: velora
     ports:
       - "5432:5432"
     volumes:
       - db_data:/var/lib/postgresql/data

   backend:
     build: ./backend
     environment:
       DATABASE_URL: postgresql+psycopg2://velora:velora@db:5432/velora
       VELORA_LAPS: 5
       VELORA_TRACK: ./config/track_def.json
       VELORA_CARS: 8
       VELORA_SEED: 1234
     ports:
       - "8000:8000"
     depends_on:
       - db
     volumes:
       - ./backend/app:/app/app
       - ./backend/config:/app/config

   frontend:
     build: ./frontend
     ports:
       - "5173:5173"
     environment:
       VITE_BACKEND_URL: http://localhost:8000
     depends_on:
       - backend

 volumes:
   db_data:


